import{_ as m}from"./main-BoJFlfPh.js";class g{x;y;size;twinklePhase;twinkleSpeed;constructor(t){this.x=Math.random()*t.width,this.y=Math.random()*t.height*.4,this.size=1+Math.random()*2,this.twinklePhase=Math.random()*Math.PI*2,this.twinkleSpeed=.015+Math.random()*.025}update(){this.twinklePhase+=this.twinkleSpeed}draw(t){const s=Math.sin(this.twinklePhase)*.5+.5;t.fillStyle=`rgba(255, 255, 255, ${s})`,t.beginPath(),t.arc(this.x,this.y,this.size,0,Math.PI*2),t.fill();const r=t.createRadialGradient(this.x,this.y,0,this.x,this.y,this.size*3);r.addColorStop(0,`rgba(255, 255, 255, ${s*.3})`),r.addColorStop(1,"rgba(255, 255, 255, 0)"),t.fillStyle=r,t.beginPath(),t.arc(this.x,this.y,this.size*3,0,Math.PI*2),t.fill()}}class y{canvas;ctx;stars=[];constructor(t,s){this.canvas=t,this.ctx=s,this.initStars(),this.animate(),window.addEventListener("resize",()=>this.resizeCanvas())}resizeCanvas(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight}initStars(){this.resizeCanvas();for(let t=0;t<40;t++)this.stars.push(new g(this.canvas))}animate=()=>{this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.stars.forEach(t=>{t.update(),t.draw(this.ctx)}),requestAnimationFrame(this.animate)}}function v(h,t,s){new y(h,t);let r=!1,i=0,n=0;document.body.addEventListener("click",c=>{const d=c.target;if(!(d.closest(".lyrics-box")||d.closest(".media-bar")||d.closest(".room-switcher"))){if(n+=1,n===1){const e=document.querySelector(".character--donkey");e&&e.classList.add("show");return}if(n===2&&!r){r=!0,console.log("Starting audio and showing lyrics");const e=document.getElementById("carol-audio");e&&(s.show(),e.currentTime=0,e.play().catch(a=>console.error("Audio play error:",a)),e.addEventListener("ended",async()=>{const{verses:a,refrain:o}=await m(async()=>{const{verses:l,refrain:w}=await import("./o-come-all-ye-faithful-CUI2fTbu.js");return{verses:l,refrain:w}},[]);i=(i+1)%a.length,console.log(`Loading verse ${i+1} (index ${i})`),console.log(`First line of verse ${i+1}: "${a[i][0]}"`);const u=[{start:2,text:a[i][0]},{start:9,text:a[i][1]},{start:18,text:a[i][2]},{start:25,text:o[0]},{start:29,text:o[1]},{start:33,text:o[2]},{start:38,text:o[3]}];s.setLyrics(u),e.currentTime=0,e.play().catch(l=>console.error("Audio play error:",l))}))}else if(n>2){const e=document.getElementById("carol-audio");e&&console.log(`Current time: ${e.currentTime.toFixed(2)}s`)}}})}export{v as initRoom3};
