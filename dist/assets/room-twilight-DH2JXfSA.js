class c{x;y;size;twinklePhase;twinkleSpeed;constructor(t,e){this.x=t,this.y=e,this.size=1.5+Math.random()*1.5,this.twinklePhase=Math.random()*Math.PI*2,this.twinkleSpeed=.02+Math.random()*.03}update(){this.twinklePhase+=this.twinkleSpeed}draw(t){const e=Math.sin(this.twinklePhase)*.5+.5;t.fillStyle=`rgba(255, 255, 255, ${e})`,t.beginPath(),t.arc(this.x,this.y,this.size,0,Math.PI*2),t.fill();const s=t.createRadialGradient(this.x,this.y,0,this.x,this.y,this.size*3);s.addColorStop(0,`rgba(255, 255, 255, ${(e-.5)*.3})`),s.addColorStop(1,"rgba(255, 255, 255, 0)"),t.fillStyle=s,t.beginPath(),t.arc(this.x,this.y,this.size*3,0,Math.PI*2),t.fill()}}class d{canvas;ctx;stars=[];constructor(t,e){this.canvas=t,this.ctx=e,this.initStars(),this.animate(),window.addEventListener("resize",()=>this.resizeCanvas())}resizeCanvas(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight}initStars(){this.resizeCanvas();for(let t=0;t<25;t+=1){const e=Math.random()*this.canvas.width,s=Math.random()*(this.canvas.height*.5);this.stars.push(new c(e,s))}}animate=()=>{this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.stars.forEach(t=>{t.update(),t.draw(this.ctx)}),requestAnimationFrame(this.animate)}}class l{dragTarget=null;dragOffsetX=0;dragOffsetY=0;constructor(t){t.forEach(e=>{e.addEventListener("mousedown",s=>this.startDrag(s,e)),e.addEventListener("touchstart",s=>this.startDrag(s,e))})}getPoint(t){if("touches"in t&&t.touches.length)return{x:t.touches[0].clientX,y:t.touches[0].clientY};const e=t;return{x:e.clientX,y:e.clientY}}startDrag(t,e){const s=this.getPoint(t);this.dragTarget=e;const i=e.getBoundingClientRect();this.dragOffsetX=s.x-i.left,this.dragOffsetY=s.y-i.top,e.style.transition="none",document.addEventListener("mousemove",this.onDragMove),document.addEventListener("touchmove",this.onDragMove,{passive:!1}),document.addEventListener("mouseup",this.endDrag),document.addEventListener("touchend",this.endDrag)}onDragMove=t=>{if(!this.dragTarget)return;const e=this.getPoint(t);this.dragTarget.style.left=`${e.x-this.dragOffsetX}px`,this.dragTarget.style.top=`${e.y-this.dragOffsetY}px`,"preventDefault"in t&&t.preventDefault()};endDrag=()=>{this.dragTarget&&(this.dragTarget.style.transition=""),this.dragTarget=null,document.removeEventListener("mousemove",this.onDragMove),document.removeEventListener("touchmove",this.onDragMove),document.removeEventListener("mouseup",this.endDrag),document.removeEventListener("touchend",this.endDrag)}}class g{gabriel=null;hosts;clickCount=0;constructor(){this.gabriel=document.querySelector(".character--gabriel"),this.hosts=document.querySelectorAll(".character--host")}showCharacters(){this.gabriel&&this.gabriel.classList.add("show"),this.hosts.forEach(t=>t.classList.add("show"))}hasCharacters(){return this.gabriel!==null||this.hosts.length>0}getCharacters(){const t=[];return this.gabriel&&t.push(this.gabriel),t.push(...Array.from(this.hosts)),t}}function u(a,t,e){const s=new g;new d(a,t),s.hasCharacters()&&new l(s.getCharacters());let i=!1,r=0;document.body.addEventListener("click",o=>{const n=o.target;if(!(n.closest(".lyrics-box")||n.closest(".media-bar")||n.closest(".room-switcher"))){if(r+=1,r===1){s.showCharacters();return}if(r===2&&!i){i=!0;const h=document.getElementById("carol-audio");h&&(e.show(),h.currentTime=4,h.play().catch(()=>{}))}}})}export{g as CharacterManager,l as DragManager,d as StarfieldRenderer,u as initRoom2};
